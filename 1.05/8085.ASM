ASM:	MOV	[STK],SP
	XOR	AX,AX
	MOV	[BINLEN],AX
	MOV	SI,[TXTBUF]
	MOV	AL,[FUNC]
	TEST	AL,AL
	JNS	ASM2
	XOR	AX,AX
	MOV	[TXTLEN],AX
	MOV	SI,[BINBUF]
	MOV	DI,[TXTBUF]
	CALL	DISASM
	MOV	AX,0A0DH
	STOSW
	MOV	AX,DI
	SUB	AX,[TXTBUF]
	MOV	[TXTLEN],AX
	MOV	[BINLEN],CX
	JMP	SHORT ASM0
ASM1:	CALL	LBL
ASM2:	XOR	CX,CX
	CALL	CC
	JZ	ASM0
	MOV	DI,I8085
	CALL	SL
	JS	ASM3
	MOV	DI,IHDL
	CALL	ASM5
	CALL	CC
	JNZ	ASM9
	MOV	AL,CH
	CLD
	MOV	DI,[BINBUF]
	STOSB
	MOV	AX,[IMM]
	STOSW
	XOR	CH,CH
	MOV	[BINLEN],CX
	JMP	SHORT ASM0
ASM3:	MOV	DI,D8085
	CALL	SL
	JS	ASM1
	MOV	DI,AHDL
	CALL	ASM5
ASM0:	ADD	[PC],CX
	CLC
	RET
ASM5:	MOV	CH,AL
	XOR	AL,AL
	XCHG	AL,AH
	SHL	AX,1
	ADD	DI,AX
	JMP	[DI]
ASM9:	MOV	AL,9
	JMP	FAIL
RI:	MOV	DL,24H
	JMP	RE
RNC:	CMP	AL,30H
	JC	RNC0
	CMP	AL,3AH
	JC	RNC1
	STC
	RET
RNC1:	PUSH	CX
	MOV	CL,5
	LEA	DX,[BX+SI]
	PUSH	DX
	PUSH	AX
	DEC	BX
	MOV	AL,[BX+SI]
	CMP	AL,42H
	JZ	RNC2
	CMP	AL,48H
	JZ	RNC16
	CMP	AL,4FH
	JZ	RNC8
	CMP	AL,51H
	JZ	RNC4
	INC	BX
	JNZ	RNC10
RNC2:	DEC	CX
RNC4:	DEC	CX
RNC8:	DEC	CX
RNC16:	DEC	CX
RNC10:	CALL	RN
	POP	DX
	XCHG	AX,DX
	POP	SI
	POP	CX
RNC0:	RET
RNM:	PUSH	AX
	PUSH	CX
	PUSH	DX
	PUSH	BX
	PUSH	SI
	MOV	DI,D8085
	CALL	SL
	POP	SI
	POP	BX
	POP	DX
	POP	CX
	JS	RNM0
	CMP	AH,5
	JNZ	RNM0
	ADD	SI,BX
	CMP	AL,12H
	JZ	RNM1
	CMP	AL,13H
	JZ	RNM2
D5:	MOV	AL,0CH
	JMP	FAIL
RNM0:	POP	AX
	STC
	RET
RNM1:	OR	CL,4
	JNZ	RNM3
RNM2:	OR	CL,8
RNM3:	POP	AX
	CALL	CC
	JZ	RNM8
	CLC
	RET
RNM8:	MOV	AL,8
	JMP	FAIL
SCREG:	PUSH	CX
	CMP	BX,1
	JNZ	SCREG0
	MOV	DI,REGS
	MOV	CX,8
	CLD
	REPNZ	SCASB
	JNZ	SCREG0
	INC	SI
	MOV	AL,7
	SUB	AL,CL
	XOR	AH,AH
SCREG0:	POP	CX
	RET
COMMA:	CALL	CC
	JZ	RA8
	CMP	AL,2CH
	JNZ	RA1
	INC	SI
	RET
RA:	CALL	CC
	JZ	RA8
	CALL	SCREG
	JNZ	RA0
	RET
RA1:	MOV	AL,1
	JMP	FAIL
RA8:	MOV	AL,8
	JMP	FAIL
RT:	CALL	CC
	JZ	RA8
	CMP	BL,1
	JZ	RT1
	CMP	BL,2
	JZ	RT2
	CMP	BL,3
	JZ	RT3
RA0:	MOV	AL,0
	JMP	FAIL
RT1:	CALL	SCREG
	JNZ	RA0
	TEST	AL,1
	JNZ	RA0
	CMP	AL,6
	JNC	RA0
	SHL	AL,1
	SHL	AL,1
	SHL	AL,1
	RET
RT2:	LODSW
	CMP	AX,5053H
	JNZ	RA0
	MOV	AL,30H
	RET
RT3:	LODSW
	CMP	AX,5350H
	JNZ	RA0
	LODSB
	CMP	AL,57H
	JNZ	RA0
	MOV	AL,30H
	RET
G5:	CALL	RT
	JMP	SHORT G1S
G7:	CALL	G5
	CALL	COMMA
G3:	CALL	RI
	MOV	CL,3
	RET
G4:	CALL	RA
G4S:	SHL	AL,1
	SHL	AL,1
	SHL	AL,1
	JMP	SHORT G1S
G6:	CALL	RI
	CMP	AL,8
	JC	G1S
	MOV	AL,7
	JMP	FAIL
G8:	CALL	G4
	CALL	COMMA
G1:	CALL	RA
G1S:	OR	CH,AL
G0:	MOV	CL,1
	RET
G9:	CALL	G4
	CALL	COMMA
G2:	CALL	RI
	MOV	CL,2
	RET
D4:	MOV	CX,[PC]
	AND	CX,1
	JZ	D4X
	MOV	DI,[BINBUF]
	MOV	[DI],CH
D4X:	RET
D1:	XOR	CL,CL
	JMP	SETDFB
D2:	CALL	RI
	ADD	[USIZE],AX
	XCHG	CX,AX
	RET
D0:	MOV	AL,[FUNC]
	TEST	AL,3
	JZ	$+8
	CALL	RI
	MOV	DI,BP
	STOSW
	XOR	CX,CX
	RET
D3:	CALL	RI
	MOV	[VORG],AX
	XOR	CX,CX
	RET
D6F8:	MOV	AL,8
	JMP	FAIL
D6:	CALL	SETINC
D7:	MOV	AL,[OPCODE]
	JMP	FAIL
DISASM:	CLD
	XOR	BH,BH
	MOV	BL,[SI]
	MOV	DX,[SI+1]
	PUSH	BX
	MOV	CL,9
	MOV	BL,[BIN85+BX]
	MOV	SI,I8085
	XOR	AX,AX
DISAS1:	ADD	SI,AX
	LODSW
	LODSB
	XOR	AH,AH
	DEC	BX
	JNS	DISAS1
	XCHG	AX,CX
	REPZ	MOVSB
	STOSB
	POP	BX
	MOV	AL,BL
	SHR	BL,1
	MOV	BL,[DGRP+BX]
	JC	DISAS2
	SHR	BL,1
	SHR	BL,1
	SHR	BL,1
	SHR	BL,1
DISAS2:	AND	BL,0FH
	JNZ	DISAS3
	DEC	DI
DISAS3:	SHL	BL,1
	CALL	[DHDL+BX]
	XOR	CH,CH
	RET
RIMD:	CALL	INCD
	MOV	AL,2CH
	STOSB
IMBD:	MOV	CL,2
	CMP	DL,0A0H
	JC	IMBD1
	MOV	AL,30H
	STOSB
IMBD1:	MOV	AL,DL
	CALL	HALX
	MOV	AL,48H
	STOSB
	RET
RPID:	CALL	RGPD
	MOV	AL,2CH
	STOSB
IMWD:	MOV	CL,3
	CMP	DH,0A0H
	JC	IMWD1
	MOV	AL,30H
	STOSB
IMWD1:	MOV	AL,DH
	CALL	HALX
	JMP	SHORT IMBD1
INCD:	SHR	AL,1
	SHR	AL,1
	SHR	AL,1
REGD:	AND	AL,7
	MOV	BX,REGS
	XLATB
	STOSB
	MOV	CL,1
	RET
RGPD:	SHR	AL,1
	SHR	AL,1
	SHR	AL,1
	AND	AL,6
	CMP	AL,6
	JC	REGD
	MOV	AX,5053H
	STOSW
IMPD:	MOV	CL,1
	RET
RSTD:	SHR	AL,1
	SHR	AL,1
	SHR	AL,1
	AND	AL,7
	ADD	AL,30H
	STOSB
	MOV	CL,1
	RET
RRMD:	PUSH	AX
	CALL	INCD
	MOV	AL,2CH
	STOSB
	POP	AX
	JMP	SHORT REGD
PSWD:	MOV	AX,5350H
	STOSW
	MOV	AL,57H
	STOSB
	MOV	CL,1
	RET
IHDL	DW	G0,G1,G2,G3
	DW	G4,G5,G6,G7
	DW	G8,G9
AHDL	DW	D0,D1,D2,D3
	DW	D4,D5,D6,D7
DHDL	DW	IMPD,REGD,IMBD
	DW	IMWD,INCD,RGPD
	DW	RSTD,RPID,RRMD
	DW	RIMD,PSWD
REGS	DB	"BCDEHLMA"
BIN85	DB	33H,30H,52H,1EH
	DB	1DH,16H,32H,40H
	DB	19H,15H,2BH,17H
	DB	1DH,16H,32H,47H
	DB	06H,30H,52H,1EH
	DB	1DH,16H,32H,3AH
	DB	3DH,15H,2BH,17H
	DB	1DH,16H,32H,3BH
	DB	3FH,30H,4DH,1EH
	DB	1DH,16H,32H,14H
	DB	2CH,15H,2EH,17H
	DB	1DH,16H,32H,0AH
	DB	4FH,30H,51H,1EH
	DB	1DH,16H,32H,53H
	DB	2DH,15H,2AH,17H
	DB	1DH,16H,32H,0BH
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,1BH,31H
	DB	31H,31H,31H,31H
	DB	31H,31H,31H,31H
	DB	02H,02H,02H,02H
	DB	02H,02H,02H,02H
	DB	01H,01H,01H,01H
	DB	01H,01H,01H,01H
	DB	54H,54H,54H,54H
	DB	54H,54H,54H,54H
	DB	4BH,4BH,4BH,4BH
	DB	4BH,4BH,4BH,4BH
	DB	04H,04H,04H,04H
	DB	04H,04H,04H,04H
	DB	57H,57H,57H,57H
	DB	57H,57H,57H,57H
	DB	34H,34H,34H,34H
	DB	34H,34H,34H,34H
	DB	0CH,0CH,0CH,0CH
	DB	0CH,0CH,0CH,0CH
	DB	43H,38H,25H,22H
	DB	0EH,39H,03H,48H
	DB	4AH,3EH,29H,49H
	DB	13H,07H,00H,48H
	DB	42H,38H,23H,36H
	DB	0DH,39H,55H,48H
	DB	3CH,4EH,1FH,1CH
	DB	08H,24H,4CH,48H
	DB	46H,38H,28H,59H
	DB	12H,39H,05H,48H
	DB	45H,37H,27H,56H
	DB	10H,2FH,58H,48H
	DB	44H,38H,26H,18H
	DB	0FH,39H,35H,48H
	DB	41H,50H,21H,1AH
	DB	09H,20H,11H,48H
DGRP	DB	07H,55H,44H,90H
	DB	05H,55H,44H,90H
	DB	07H,55H,44H,90H
	DB	05H,55H,44H,90H
	DB	07H,35H,44H,90H
	DB	25H,35H,44H,90H
	DB	07H,35H,44H,90H
	DB	25H,35H,44H,90H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,88H
	DB	88H,88H,88H,08H
	DB	88H,88H,88H,88H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	11H,11H,11H,11H
	DB	05H,33H,35H,26H
	DB	00H,30H,33H,26H
	DB	05H,32H,35H,26H
	DB	00H,32H,33H,26H
	DB	05H,30H,35H,26H
	DB	00H,30H,30H,26H
	DB	0AH,30H,3AH,26H
	DB	00H,30H,33H,26H
I8085	DW	90
	DB	3,"ACI",0CEH,2
	DB	3,"ADC",88H,1
	DB	3,"ADD",80H,1
	DB	3,"ADI",0C6H,2
	DB	3,"ANA",0A0H,1
	DB	3,"ANI",0E6H,2
	DB	4,"ARHL",10H,0
	DB	4,"CALL",0CDH,3
	DB	2,"CC",0DCH,3
	DB	2,"CM",0FCH,3
	DB	3,"CMA",2FH,0
	DB	3,"CMC",3FH,0
	DB	3,"CMP",0B8H,1
	DB	3,"CNC",0D4H,3
	DB	3,"CNZ",0C4H,3
	DB	2,"CP",0F4H,3
	DB	3,"CPE",0ECH,3
	DB	3,"CPI",0FEH,2
	DB	3,"CPO",0E4H,3
	DB	2,"CZ",0CCH,3
	DB	3,"DAA",27H,0
	DB	3,"DAD",9,5
	DB	3,"DCR",5,4
	DB	3,"DCX",0BH,5
	DB	2,"DI",0F3H,0
	DB	4,"DSUB",8,0
	DB	2,"EI",0FBH,0
	DB	3,"HLT",76H,0
	DB	2,"IN",0DBH,2
	DB	3,"INR",4,4
	DB	3,"INX",3,5
	DB	2,"JC",0DAH,3
	DB	2,"JK",0FDH,3
	DB	2,"JM",0FAH,3
	DB	3,"JMP",0C3H,3
	DB	3,"JNC",0D2H,3
	DB	3,"JNK",0DDH,3
	DB	3,"JNZ",0C2H,3
	DB	2,"JP",0F2H,3
	DB	3,"JPE",0EAH,3
	DB	3,"JPO",0E2H,3
	DB	2,"JZ",0CAH,3
	DB	3,"LDA",3AH,3
	DB	4,"LDAX",0AH,5
	DB	4,"LDHI",28H,2
	DB	4,"LDSI",38H,2
	DB	4,"LHLD",2AH,3
	DB	4,"LHLX",0EDH,0
	DB	3,"LXI",1,7
	DB	3,"MOV",40H,8
	DB	3,"MVI",6,9
	DB	3,"NOP",0,0
	DB	3,"ORA",0B0H,1
	DB	3,"ORI",0F6H,2
	DB	3,"OUT",0D3H,2
	DB	4,"PCHL",0E9H,0
	DB	3,"POP",0C1H,5
	DB	4,"PUSH",0C5H,5
	DB	3,"RAL",17H,0
	DB	3,"RAR",1FH,0
	DB	2,"RC",0D8H,0
	DB	4,"RDEL",18H,0
	DB	3,"RET",0C9H,0
	DB	3,"RIM",20H,0
	DB	3,"RLC",7,0
	DB	2,"RM",0F8H,0
	DB	3,"RNC",0D0H,0
	DB	3,"RNZ",0C0H,0
	DB	2,"RP",0F0H,0
	DB	3,"RPE",0E8H,0
	DB	3,"RPO",0E0H,0
	DB	3,"RRC",0FH,0
	DB	3,"RST",0C7H,6
	DB	4,"RSTV",0CBH,0
	DB	2,"RZ",0C8H,0
	DB	3,"SBB",98H,1
	DB	3,"SBI",0DEH,2
	DB	4,"SHLD",22H,3
	DB	4,"SHLX",0D9H,0
	DB	3,"SIM",30H,0
	DB	4,"SPHL",0F9H,0
	DB	3,"STA",32H,3
	DB	4,"STAX",2,5
	DB	3,"STC",37H,0
	DB	3,"SUB",90H,1
	DB	3,"SUI",0D6H,2
	DB	4,"XCHG",0EBH,0
	DB	3,"XRA",0A8H,1
	DB	3,"XRI",0EEH,2
	DB	4,"XTHL",0E3H,0
D8085	DW	11
	DB	2,"DB",1,1
	DB	2,"DS",0,2
	DB	2,"DW",2,1
	DB	3,"END",0FFH,7
	DB	3,"EQU",0,0
	DB	4,"EVEN",0,4
	DB	6,"INCBIN",0FDH,6
	DB	7,"INCLUDE",0FEH,6
	DB	3,"ORG",0,3
	DB	4,"HIGH",13H,5
	DB	3,"LOW",12H,5
