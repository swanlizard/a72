	MOV	SI,81H
	MOV	DI,OFFSET INFILE
	CLD
	CALL	RFN
	JZ	NOPE
	CALL	RDWORD
	MOV	[SPLIT],AX
	MOV	[SPLIT+2],DX
	ADD	AX,DX
	JZ	NOPE
	MOV	DI,OFFSET OUTFILE
	CALL	RFN
	JNZ	MAIN
	MOV	SI,OFFSET INFILE
	MOV	DI,OFFSET OUTFILE
	MOV	CX,40H
	REPZ	MOVSB
MAIN:	MOV	AX,DI
	MOV	DI,OFFSET OUTFILE
	MOV	CL,2EH
	SUB	AX,DI
	XCHG	AX,CX
	REPNZ	SCASB
	JNZ	MAIN1
	DEC	DI
MAIN1:	STOSB
	MOV	BP,DI
	DEC	BP
	MOV	AL,48
	STOSB
	STOSB
	STOSB
	MOV	AX,3D00H
	STOSB
	MOV	DX,OFFSET INFILE
	INT	21H
	JC	MAIN0
	MOV	[INHDL],AX
MAIN2:	CALL	RUN
	JNC	MAIN2
	MOV	AH,3EH
	MOV	BX,[INHDL]
	INT	21H
MAIN0:	RET
NOPE:	MOV	AH,9
	MOV	DX,OFFSET USAGE
	INT	21H
	RET
RUN:	MOV	SI,OFFSET SPLIT
	MOV	DI,OFFSET LEFT
	CLD
	MOVSW
	MOVSW
	MOV	SI,3
INCF:	MOV	AL,[BP+SI]
	INC	AX
	CMP	AL,58
	JC	INCF1
	MOV	AL,48
	MOV	[BP+SI],AL
	DEC	SI
	JNZ	INCF
	STC
	RET
INCF1:	MOV	[BP+SI],AL
	MOV	AH,3CH
	XOR	CX,CX
	MOV	DX,OFFSET OUTFILE
	INT	21H
	JC	RUN0
	MOV	[OUTHDL],AX
RUN1:	XOR	DX,DX
	MOV	CX,8192
	CMP	DX,[LEFT+2]
	JC	RUN2
	CMP	CX,[LEFT]
	JC	RUN2
	MOV	CX,[LEFT]
RUN2:	MOV	AH,3FH
	MOV	DX,OFFSET BUFFER
	MOV	BX,[INHDL]
	INT	21H
	TEST	AX,AX
	JZ	RUN3
	PUSH	AX
	MOV	CX,AX
	MOV	AH,40H
	MOV	DX,OFFSET BUFFER
	MOV	BX,[OUTHDL]
	INT	21H
	POP	AX
	XOR	DX,DX
	SUB	[LEFT],AX
	SBB	[LEFT+2],DX
	MOV	AX,[LEFT]
	ADD	AX,[LEFT+2]
	JNZ	RUN1
	MOV	AH,3EH
	MOV	BX,[OUTHDL]
	INT	21H
	CLC
	RET
RUN3:	MOV	AH,3EH
	MOV	BX,[OUTHDL]
	INT	21H
RUN0:	STC
	RET
RFN:	LODSB
	CMP	AL,0DH
	JZ	RFN0
	CMP	AL,21H
	JC	RFN
RFN1:	STOSB
	LODSB
	CMP	AL,21H
	JNC	RFN1
	DEC	SI
	XOR	AL,AL
	STOSB
	CMP	AL,0FFH
RFN0:	RET
RDWORD:	LODSB
	CMP	AL,21H
	JC	RDWORD
	XOR	DX,DX
	XOR	BX,BX
	XOR	AH,AH
RDWOR1:	SUB	AL,30H
	JC	RDWOR0
	CMP	AL,0AH
	JNC	RDWOR0
	ROL	DX,1
	RCL	BX,1
	MOV	CX,DX
	MOV	BP,BX
	ROL	DX,1
	RCL	BX,1
	ROL	DX,1
	RCL	BX,1
	ADD	DX,CX
	ADC	BX,BP
	ADD	DX,AX
	ADC	BX,0
	LODSB
	JMP	SHORT RDWOR1
RDWOR0:	XCHG	AX,BX
	XCHG	AX,DX
	DEC	SI
	RET
USAGE	DB	"SPLIT <IN> <SIZE> "
	DB	"[<OUT>]",13,10,36
SPLIT	DD	?
LEFT	DD	?
INHDL	DW	?
OUTHDL	DW	?
INFILE	DS	40H
OUTFILE	DS	40H
BUFFER:
