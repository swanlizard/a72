BMSD:		MOV DX, 0B800H
		MOV ES, DX
		AND AH, 3
		MOV DH, AH
		SHL AH, 1
		SHL AH, 1
		OR AH, DH
		MOV DH, AH
		SHL AH, 1
		SHL AH, 1
		SHL AH, 1
		SHL AH, 1
		OR DH, AH
		XOR AH, AH
		MOV DI, AX
		XCHG AL, AH
		SHR AX, 1
		SHR AX, 1
		SHR AX, 1
		SHL DI, 1
		SHL DI, 1
		SHL DI, 1
		ADD DI, AX
		AND AX, 2000H
		ADD DI, AX
		CMP AX, 2000H
		SBB BP, BP
		AND BP, 80
		MOV AX, CX
		SHR AX, 1
		SHR AX, 1
		ADD DI, AX
		AND CL, 3
		SHL CL, 1
		XCHG DH, BH
		TEST BL, 3
		LAHF
		ROL AH, 1
		SHR BL, 1
		SHR BL, 1
		RCL AH, 1
		CMC
		ADC BL, 0
		CLD
BMSDLV:		MOV DL, BL
BMSDLH:		MOV AL, DS:[SI]
		XOR AL, BH
		MOV AH, AL
		SHR AH, 1
		AND AX, 5555H
		OR AL, AH
		MOV AH, AL
		SHL AH, 1
		OR AL, AH
		XOR AH, AH
		MOV CH, AL
		NOT AX
		ROR AX, CL
		AND ES:[DI], AX
		LODSB
		AND AL, CH
		XOR AH, AH
		ROR AX, CL
		OR ES:[DI], AX
		INC DI
		DEC DL
		JNZ BMSDLH
		XOR AH, AH
		MOV AL, BL
		SUB DI, AX
		XOR BP, 80
		XOR DI, 2000H
		ADD DI, BP
		DEC DH
		JNZ BMSDLV
		RET
