WDISP:		CLD
		CMP AL, 0C0H
		JC WDRM
		PUSH SI
		MOV SI, AX
		AND SI, 7
		SHL SI, 1
		ADD SI, OFFSET REGS
		ADD SI, [WADJ]
		MOVSW
		POP SI
		RET
WDRM:		PUSH AX
		XOR CH, CH
		CALL WSPR
		MOV AL, 5BH
		STOSB
		POP AX
		PUSH AX
		AND AL, 0C7H
		CMP AL, 6
		JNZ WDR
		LODSW
		CALL WHA
		JMP SHORT WDX
WDR:		PUSH SI
		PUSH BX
		MOV BX, OFFSET _DISP
		AND AL, 7
		XLATB
		POP BX
		MOV AH, AL
		AND AX, 0F00FH
		SHR AH, 1
		SHR AH, 1
		SHR AH, 1
		SHL AL, 1
		XOR DX, DX
		XCHG DL, AH
		ADD AX, OFFSET REGS
		MOV SI, AX
		MOVSW
		OR DL, DL
		JZ WD1R
		MOV AL, 2BH
		STOSB
		MOV SI, OFFSET REGS
		ADD SI, DX
		MOVSW
WD1R:		POP SI
		POP AX
		PUSH AX
		CMP AL, 40H
		JC WDX
		CMP AL, 80H
		JC WDD8
		LODSW
		JMP SHORT WDD
WDD8:		LODSB
		CBW
WDD:		OR AX, AX
		JS WDM
		JZ WDX
		MOV BYTE PTR [DI], 2BH
		INC DI
WDM:		CALL WHAS
WDX:		MOV AL, 5DH
		STOSB
		POP AX
		RET
