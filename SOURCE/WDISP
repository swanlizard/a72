WDISP:		CLD
		CMP AL, 0C0H
		JC WDRM
		PUSH SI
		MOV SI, AX
		AND SI, 7
		SHL SI, 1
		ADD SI, OFFSET REGS
		ADD SI, [WADJ]
		MOVSW
		POP SI
		RET
WDRM:		PUSH AX
		XOR CH, CH
		CALL WSPR
		MOV AL, 5BH
		STOSB
		POP AX
		PUSH AX
		AND AL, 0C7H
		CMP AL, 6
		JNZ WDR
		LODSW
		CALL WHA
		JMP SHORT WDX
WDR:		PUSH SI
		MOV SI, AX
		AND SI, 7
		SHL SI, 1
		ADD SI, OFFSET _DISP
		MOV DX, [SI]
		MOV SI, [SI]
		AND SI, 0FFH
		ADD SI, OFFSET REGS
		MOVSW
		OR DH, DH
		JZ WD1R
		MOV AL, 2BH
		STOSB
		XOR DL, DL
		XCHG DL, DH
		MOV SI, DX
		ADD SI, OFFSET REGS
		MOVSW
WD1R:		POP SI
		POP AX
		PUSH AX
		CMP AL, 40H
		JC WDX
		CMP AL, 80H
		JC WDD8
		LODSW
		JMP SHORT WDD
WDD8:		LODSB
		CBW
WDD:		OR AX, AX
		JS WDM
		JZ WDX
		MOV BYTE PTR [DI], 2BH
		INC DI
WDM:		CALL WHAS
WDX:		MOV AL, 5DH
		STOSB
		POP AX
		RET
