FAIL:		CLD
		INC WORD PTR [ERRS]
		MOV DI, OFFSET ELEMENT+1
		MOV SP, [STK]
		XOR AH, AH
		PUSH AX
		SHL AX, 1
		ADD AX, OFFSET ERRM
		MOV SI, AX
		MOV SI, [SI]
		XOR CH, CH
		MOV AL, [FUNC]
		CMP AL, 1
		JZ FFUNC1
		CMP AL, 2
		JNZ FAIL0
FFUNC1:		PUSH SI
		PUSH DI
		CALL CALF
		MOV AX, [DI+2]
		POP DI
		MOV SI, BX
		MOV CL, [SI]
		INC SI
	REPZ	MOVSB
		MOV SI, OFFSET ONLM
		MOV CL, [SI]
		INC SI
	REPZ	MOVSB
		POP SI
		CALL WDA
		MOV AX, 203AH
		STOSW
FAIL0:		MOV CL, [SI]
		INC SI
	REPZ	MOVSB
		POP AX
		CMP AL, 5
		JZ FAIL5
		CMP AL, 0BH
		JZ FAILB
NOBS:		MOV AX, 0A0DH
		STOSW
		MOV AX, DI
		SUB AX, OFFSET ELEMENT+1
		MOV [ELEMENT], AL
		STC
		RET
FAILB:		MOV SI, OFFSET TEMP
FAILBL:		LODSB
		OR AL, AL
		JZ NOBS
		STOSB
		JMP SHORT FAILBL
FAIL5:		MOV AX, [IMM]
		OR AX, AX
		JNS FAILNS
		ADD AX, 80H
		NEG AX
		JMP SHORT FAILS
FAILNS:		SUB AX, 7FH
FAILS:		PUSH AX
		CALL WDA
		POP AX
		MOV SI, OFFSET BYTEM
		MOV CL, [SI]
		INC SI
		CMP AX, 1
		JA ONE8
		DEC CX
ONE8:	REPZ	MOVSB
		JMP SHORT NOBS
