ASMF:		XOR AX, AX
		MOV [PC], AX
		MOV [ERRS], AX
		MOV [USIZE], AX
		MOV [INCLEV], AX
		MOV [FNAMES], AL
		CMP BYTE PTR [FUNC], 2
		JZ NOCSYM
		MOV [SYMBS], AX
NOCSYM:		MOV AX, 4200H
		XOR CX, CX
		XOR DX, DX
		MOV BX, [INFILE]
		INT 21H
		JC ASMFF
		CALL CALF
		MOV AX, [INFILE]
		MOV SI, OFFSET INFN
		CALL INCF
ASMFL:		CALL RD
		JC ASMFF
		OR AX, AX
		JZ ASMF0
		CALL CALF
		INC WORD PTR [DI+2]
		MOV SI, OFFSET INPUT
		CALL ASM
		JC ASMER
		CALL WR
		JNC ASMFL
		CALL CLOSF
		MOV AX, OFFSET OUTFN
		JMP FFAIL
ASMFF:		CALL CLOSF
		MOV AX, OFFSET INFN
		JMP FFAIL
ASMF0:		OR WORD PTR [INCLEV], 0
		JZ ASMEND
		MOV AH, 3EH
		MOV BX, [INFILE]
		INT 21H
		DEC WORD PTR [INCLEV]
		CALL CALF
		MOV AX, [DI]
		MOV [INFILE], AX
		JMP SHORT ASMFL
ASMER:		MOV SI, OFFSET ELEMENT
		CALL STOP
		JMP SHORT ASMFL
ASMEND:		RET
